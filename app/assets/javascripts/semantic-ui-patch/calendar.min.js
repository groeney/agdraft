!function(a,b,c,d){a.fn.calendar=function(b){var l,e=a(this),f=e.selector||"",g=(new Date).getTime(),h=[],i=arguments[0],j="string"==typeof i,k=[].slice.call(arguments,1);return e.each(function(){var B,E,e=a.isPlainObject(b)?a.extend(!0,{},a.fn.calendar.settings,b):a.extend({},a.fn.calendar.settings),m=e.className,n=e.namespace,o=e.selector,p=e.formatter,q=e.parser,r=e.metadata,s=e.error,t="."+n,u="module-"+n,v=a(this),w=v.find(o.input),x=v.find(o.popup),y=v.find(o.activator),z=this,A=v.data(u),C=!1,D=!1;E={initialize:function(){E.debug("Initializing calendar for",z),B=E.get.isTouch(),E.setup.popup(),E.setup.inline(),E.setup.input(),E.setup.date(),E.create.calendar(),E.bind.events(),E.instantiate()},instantiate:function(){E.verbose("Storing instance of calendar"),A=E,v.data(u,A)},destroy:function(){E.verbose("Destroying previous calendar for",z),v.removeData(u),E.unbind.events()},setup:{popup:function(){if(!e.inline&&(y.length||(y=v.children().first(),y.length))){if(a.fn.popup===d)return void E.error(s.popup);x.length||(x=a("<div/>").addClass(m.popup).prependTo(y.parent())),x.addClass(m.calendar);var b=e.onVisible,c=e.onHidden;w.length||(x.attr("tabindex","0"),b=function(){return E.focus(),e.onVisible.apply(x,arguments)},c=function(){return E.blur(),e.onHidden.apply(x,arguments)});var f=function(){return E.set.focusDate(E.get.date()),E.set.mode(e.startMode),e.onShow.apply(x,arguments)},g=e.on||(w.length?"focus":"click"),h=a.extend({},e.popupOptions,{popup:x,on:g,hoverable:"hover"===g,onShow:f,onVisible:b,onHide:e.onHide,onHidden:c});E.popup(h)}},inline:function(){y.length&&!e.inline||(x=a("<div/>").addClass(m.calendar).appendTo(v),w.length||x.attr("tabindex","0"))},input:function(){e.touchReadonly&&w.length&&B&&w.prop("readonly",!0)},date:function(){if(w.length){var a=w.val(),b=q.date(a,e);E.set.date(b,e.formatInput,!1)}}},create:{calendar:function(){var b,c,d,f,g,h=E.get.mode(),i=new Date,j=E.get.date(),k=E.get.focusDate(),l=k||j||e.initialDate||i;l=E.helper.dateInRange(l),k||(k=l,E.set.focusDate(k,!1,!1));var n=l.getMinutes(),o=l.getHours(),q=l.getDate(),s=l.getMonth(),t=l.getFullYear(),u="year"===h,v="month"===h,w="day"===h,y="hour"===h,z="minute"===h,A="time"===e.type,B=w?7:y?4:3,C=7===B?"seven":4===B?"four":"three",D=w||y?6:4,F=(new Date(t,s,1).getDay()-e.firstDayOfWeek%7+7)%7;if(!e.constantHeight&&w){var G=new Date(t,s+1,0).getDate()+F;D=Math.ceil(G/7)}var H=u?10:v?1:0,I=w?1:0,J=y||z?1:0,K=y||z?q:1,L=new Date(t-H,s-I,K-J,o),M=new Date(t+H,s+I,K+J,o),N=u?new Date(10*Math.ceil(t/10)-9,0,0):v?new Date(t,0,0):w?new Date(t,s,0):new Date(t,s,q,-1),O=u?new Date(10*Math.ceil(t/10)+1,0,1):v?new Date(t+1,0,1):w?new Date(t,s+1,1):new Date(t,s,q+1),P=a("<table/>").addClass(m.table).addClass(C+" column").addClass(h);if(!A){var Q=a("<thead/>").appendTo(P);f=a("<tr/>").appendTo(Q),g=a("<th/>").attr("colspan",""+B).appendTo(f);var R=a("<span/>").addClass(m.link).appendTo(g);R.text(p.header(l,h,e));var S=v?e.disableYear?"day":"year":w?e.disableMonth?"year":"month":"day";R.data(r.mode,S);var T=a("<span/>").addClass(m.prev).appendTo(g);T.data(r.focusDate,L),T.toggleClass(m.disabledCell,!E.helper.isDateInRange(N,h)),a("<i/>").addClass(m.prevIcon).appendTo(T);var U=a("<span/>").addClass(m.next).appendTo(g);if(U.data(r.focusDate,M),U.toggleClass(m.disabledCell,!E.helper.isDateInRange(O,h)),a("<i/>").addClass(m.nextIcon).appendTo(U),w)for(f=a("<tr/>").appendTo(Q),b=0;b<B;b++)g=a("<th/>").appendTo(f),g.text(p.dayColumnHeader((b+e.firstDayOfWeek)%7,e))}var V=a("<tbody/>").appendTo(P);for(b=u?10*Math.ceil(t/10)-9:w?1-F:0,c=0;c<D;c++)for(f=a("<tr/>").appendTo(V),d=0;d<B;d++,b++){var W=u?new Date(b,s,1,o,n):v?new Date(t,b,1,o,n):w?new Date(t,s,b,o,n):y?new Date(t,s,q,b):new Date(t,s,q,o,5*b),X=u?b:v?e.text.monthsShort[b]:w?W.getDate():p.time(W,e,!0);g=a("<td/>").addClass(m.cell).appendTo(f),g.text(X),g.data(r.date,W);var Y=w&&W.getMonth()!==s||!E.helper.isDateInRange(W,h),Z=E.helper.dateEqual(W,j,h);g.toggleClass(m.disabledCell,Y),g.toggleClass(m.activeCell,Z),y||z||g.toggleClass(m.todayCell,E.helper.dateEqual(W,i,h)),E.helper.dateEqual(W,k,h)&&E.set.focusDate(W,!1,!1)}if(e.today){var $=a("<tr/>").appendTo(V),_=a("<td/>").attr("colspan",""+B).addClass(m.today).appendTo($);_.text(p.today(e)),_.data(r.date,i)}E.update.focus(!1,P),x.empty(),P.appendTo(x)}},update:{focus:function(b,c){c=c||x;var d=E.get.mode(),e=E.get.date(),f=E.get.focusDate(),g=E.get.startDate(),h=E.get.endDate(),i=(b?f:null)||e||(B?null:f);c.find("td").each(function(){var b=a(this),c=b.data(r.date);if(c){var e=b.hasClass(m.disabledCell),j=b.hasClass(m.activeCell),k=E.helper.dateEqual(c,f,d),l=!!i&&(!!g&&E.helper.isDateInRange(c,d,g,i)||!!h&&E.helper.isDateInRange(c,d,i,h));b.toggleClass(m.focusCell,k&&(!B||C)),b.toggleClass(m.rangeCell,l&&!j&&!e)}})}},refresh:function(){E.create.calendar()},bind:{events:function(){x.on("mousedown"+t,E.event.mousedown),x.on("touchstart"+t,E.event.mousedown),x.on("mouseup"+t,E.event.mouseup),x.on("touchend"+t,E.event.mouseup),x.on("mouseover"+t,E.event.mouseover),w.length?(w.on("input"+t,E.event.inputChange),w.on("focus"+t,E.event.inputFocus),w.on("blur"+t,E.event.inputBlur),w.on("click"+t,E.event.inputClick),w.on("keydown"+t,E.event.keydown)):x.on("keydown"+t,E.event.keydown)}},unbind:{events:function(){x.off(t),w.length&&w.off(t)}},event:{mouseover:function(b){var c=a(b.target),d=c.data(r.date),e=1===b.buttons;d&&E.set.focusDate(d,!1,!0,e)},mousedown:function(b){w.length&&b.preventDefault(),C=b.type.indexOf("touch")>=0;var c=a(b.target),d=c.data(r.date);d&&E.set.focusDate(d,!1,!0,!0)},mouseup:function(b){E.focus(),b.preventDefault(),b.stopPropagation(),C=!1;var c=a(b.target),d=c.parent();(d.data(r.date)||d.data(r.focusDate)||d.data(r.mode))&&(c=d);var e=c.data(r.date),f=c.data(r.focusDate),g=c.data(r.mode);if(e){var h=c.hasClass(m.today);E.selectDate(e,h)}else f?E.set.focusDate(f):g&&E.set.mode(g)},keydown:function(a){if(27!==a.keyCode&&9!==a.keyCode||E.popup("hide"),E.popup("is visible"))if(37===a.keyCode||38===a.keyCode||39===a.keyCode||40===a.keyCode){var b=E.get.mode(),c="day"===b?7:"hour"===b?4:3,d=37===a.keyCode?-1:38===a.keyCode?-c:39==a.keyCode?1:c;d*="minute"===b?5:1;var f=E.get.focusDate()||E.get.date()||new Date,g=f.getFullYear()+("year"===b?d:0),h=f.getMonth()+("month"===b?d:0),i=f.getDate()+("day"===b?d:0),j=f.getHours()+("hour"===b?d:0),k=f.getMinutes()+("minute"===b?d:0),l=new Date(g,h,i,j,k);"time"===e.type&&(l=E.helper.mergeDateTime(f,l)),E.helper.isDateInRange(l,b)&&E.set.focusDate(l)}else if(13===a.keyCode){var m=E.get.focusDate();m&&E.selectDate(m)}38!==a.keyCode&&40!==a.keyCode||(a.preventDefault(),E.popup("show"))},inputChange:function(){var a=w.val(),b=q.date(a,e);E.set.date(b,!1)},inputFocus:function(){x.addClass(m.active)},inputBlur:function(){if(x.removeClass(m.active),e.formatInput){var a=E.get.date(),b=p.datetime(a,e);w.val(b)}},inputClick:function(){E.popup("show")}},get:{date:function(){return v.data(r.date)||null},focusDate:function(){return v.data(r.focusDate)||null},startDate:function(){var a=E.get.calendarModule(e.startCalendar);return(a?a.get.date():v.data(r.startDate))||null},endDate:function(){var a=E.get.calendarModule(e.endCalendar);return(a?a.get.date():v.data(r.endDate))||null},mode:function(){var b=v.data(r.mode)||e.startMode,c=E.get.validModes();return a.inArray(b,c)>=0?b:"time"===e.type?"hour":"month"===e.type?"month":"year"===e.type?"year":"day"},validModes:function(){var a=[];return"time"!==e.type&&(e.disableYear&&"year"!==e.type||a.push("year"),(!e.disableMonth&&"year"!==e.type||"month"===e.type)&&a.push("month"),e.type.indexOf("date")>=0&&a.push("day")),e.type.indexOf("time")>=0&&(a.push("hour"),e.disableMinute||a.push("minute")),a},isTouch:function(){try{return c.createEvent("TouchEvent"),!0}catch(a){return!1}},calendarModule:function(b){return b?(b instanceof a||(b=v.parent().children(b).first()),b.data(u)):null}},set:{date:function(a,b,c){b=b!==!1,c=c!==!1,a=E.helper.sanitiseDate(a),a=E.helper.dateInRange(a);var f=p.datetime(a,e);if(c&&e.onChange.call(z,a,f)===!1)return!1;var g=E.get.endDate();g&&a&&a>g&&E.set.endDate(d),E.set.dataKeyValue(r.date,a),E.set.focusDate(a),b&&w.length&&w.val(f)},startDate:function(a,b){a=E.helper.sanitiseDate(a);var c=E.get.calendarModule(e.startCalendar);c&&c.set.date(a),E.set.dataKeyValue(r.startDate,a,b)},endDate:function(a,b){a=E.helper.sanitiseDate(a);var c=E.get.calendarModule(e.endCalendar);c&&c.set.date(a),E.set.dataKeyValue(r.endDate,a,b)},focusDate:function(a,b,c,d){a=E.helper.sanitiseDate(a),a=E.helper.dateInRange(a);var e=E.set.dataKeyValue(r.focusDate,a,b);c=c!==!1&&e&&b===!1||D!=d,D=d,c&&E.update.focus(d)},mode:function(a,b){E.set.dataKeyValue(r.mode,a,b)},dataKeyValue:function(a,b,c){var d=v.data(a),e=d===b||d<=b&&d>=b;return b?v.data(a,b):v.removeData(a),c=c!==!1&&!e,c&&E.create.calendar(),!e}},selectDate:function(a,b){var c=E.get.mode(),d=b||"minute"===c||e.disableMinute&&"hour"===c||"date"===e.type&&"day"===c||"month"===e.type&&"month"===c||"year"===e.type&&"year"===c;if(d){var f=E.set.date(a)===!1;if(!f&&e.closable){E.popup("hide");var g=E.get.calendarModule(e.endCalendar);g&&(g.popup("show"),g.focus())}}else{var h="year"===c?e.disableMonth?"day":"month":"month"===c?"day":"day"===c?"hour":"minute";E.set.mode(h),"hour"===c||"day"===c&&E.get.date()?E.set.date(a):E.set.focusDate(a)}},changeDate:function(a){E.set.date(a)},clear:function(){E.set.date(d)},disable:function(){w.prop("disabled",!0)},enable:function(){w.prop("disabled",!1)},popup:function(){return y.popup.apply(y,arguments)},focus:function(){w.length?w.focus():x.focus()},blur:function(){w.length?w.blur():x.blur()},helper:{sanitiseDate:function(a){return a?(a instanceof Date||(a=q.date(""+a,e)),isNaN(a.getTime())?d:a):d},dateDiff:function(a,b,c){c=c||"day";var d="time"===e.type,f="year"===c,g=f||"month"===c,h="minute"===c,i=h||"hour"===c;return a=new Date(d?2e3:a.getFullYear(),d?0:f?0:a.getMonth(),d?1:g?1:a.getDate(),i?a.getHours():0,h?Math.floor(a.getMinutes()/5):0),b=new Date(d?2e3:b.getFullYear(),d?0:f?0:b.getMonth(),d?1:g?1:b.getDate(),i?b.getHours():0,h?Math.floor(b.getMinutes()/5):0),b.getTime()-a.getTime()},dateEqual:function(a,b,c){return!!a&&!!b&&0===E.helper.dateDiff(a,b,c)},isDateInRange:function(a,b,c,d){if(!c&&!d){var f=E.get.startDate();c=f&&e.minDate?Math.max(f,e.minDate):f||e.minDate,d=e.maxDate}return!(!a||c&&E.helper.dateDiff(a,c,b)>0||d&&E.helper.dateDiff(d,a,b)>0)},dateInRange:function(a,b,c){if(!b&&!c){var d=E.get.startDate();b=d&&e.minDate?Math.max(d,e.minDate):d||e.minDate,c=e.maxDate}var f="time"===e.type;return a?b&&E.helper.dateDiff(a,b,"minute")>0?f?E.helper.mergeDateTime(a,b):b:c&&E.helper.dateDiff(c,a,"minute")>0?f?E.helper.mergeDateTime(a,c):c:a:a},mergeDateTime:function(a,b){return a&&b?new Date(a.getFullYear(),a.getMonth(),a.getDate(),b.getHours(),b.getMinutes()):b}},setting:function(b,c){if(E.debug("Changing setting",b,c),a.isPlainObject(b))a.extend(!0,e,b);else{if(c===d)return e[b];e[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,E,b);else{if(c===d)return E[b];E[b]=c}},debug:function(){e.debug&&(e.performance?E.performance.log(arguments):(E.debug=Function.prototype.bind.call(console.info,console,e.name+":"),E.debug.apply(console,arguments)))},verbose:function(){e.verbose&&e.debug&&(e.performance?E.performance.log(arguments):(E.verbose=Function.prototype.bind.call(console.info,console,e.name+":"),E.verbose.apply(console,arguments)))},error:function(){E.error=Function.prototype.bind.call(console.error,console,e.name+":"),E.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;e.performance&&(b=(new Date).getTime(),d=g||b,c=b-d,g=b,h.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:z,"Execution Time":c})),clearTimeout(E.performance.timer),E.performance.timer=setTimeout(E.performance.display,500)},display:function(){var b=e.name+":",c=0;g=!1,clearTimeout(E.performance.timer),a.each(h,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",f&&(b+=" '"+f+"'"),(console.group!==d||console.table!==d)&&h.length>0&&(console.groupCollapsed(b),console.table?console.table(h):a.each(h,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),h=[]}},invoke:function(b,c,e){var g,h,i,f=A;return c=c||k,e=z||e,"string"==typeof b&&f!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var i=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(f[i])&&c!=g)f=f[i];else{if(f[i]!==d)return h=f[i],!1;if(!a.isPlainObject(f[e])||c==g)return f[e]!==d?(h=f[e],!1):(E.error(s.method,b),!1);f=f[e]}})),a.isFunction(h)?i=h.apply(e,c):h!==d&&(i=h),a.isArray(l)?l.push(i):l!==d?l=[l,i]:i!==d&&(l=i),h}},j?(A===d&&E.initialize(),E.invoke(i)):(A!==d&&A.invoke("destroy"),E.initialize())}),l!==d?l:e},a.fn.calendar.settings={name:"Calendar",namespace:"calendar",debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(a,b,c){return"year"===b?c.formatter.yearHeader(a,c):"month"===b?c.formatter.monthHeader(a,c):"day"===b?c.formatter.dayHeader(a,c):"hour"===b?c.formatter.hourHeader(a,c):c.formatter.minuteHeader(a,c)},yearHeader:function(a,b){var c=10*Math.ceil(a.getFullYear()/10);return c-9+" - "+(c+2)},monthHeader:function(a,b){return a.getFullYear()},dayHeader:function(a,b){var c=b.text.months[a.getMonth()],d=a.getFullYear();return c+" "+d},hourHeader:function(a,b){return b.formatter.date(a,b)},minuteHeader:function(a,b){return b.formatter.date(a,b)},dayColumnHeader:function(a,b){return b.text.days[a]},datetime:function(a,b){if(!a)return"";var c="time"===b.type?"":b.formatter.date(a,b),d=b.type.indexOf("time")<0?"":b.formatter.time(a,b,!1),e="datetime"===b.type?" ":"";return c+e+d},date:function(a,b){if(!a)return"";var c=a.getDate(),d=b.text.months[a.getMonth()],e=a.getFullYear();return"year"===b.type?e:"month"===b.type?d+" "+e:(b.monthFirst?d+" "+c:c+" "+d)+", "+e},time:function(a,b,c){if(!a)return"";var d=a.getHours(),e=a.getMinutes(),f="";return b.ampm&&(f=" "+(d<12?b.text.am:b.text.pm),d=0===d?12:d>12?d-12:d),d+":"+(e<10?"0":"")+e+f},today:function(a){return"date"===a.type?a.text.today:a.text.now}},parser:{date:function(b,c){if(!b)return null;if(b=(""+b).trim().toLowerCase(),0===b.length)return null;var e,f,g,h=-1,i=-1,j=-1,k=-1,l=-1,m=d,n="time"===c.type,o=c.type.indexOf("time")<0,p=b.split(c.regExp.dateWords),q=b.split(c.regExp.dateNumbers);if(!o)for(m=a.inArray(c.text.am.toLowerCase(),p)>=0||!(a.inArray(c.text.pm.toLowerCase(),p)>=0)&&d,e=0;e<q.length;e++){var r=q[e];if(r.indexOf(":")>=0){if(i<0||h<0){var s=r.split(":");for(g=0;g<Math.min(2,s.length);g++)f=parseInt(s[g]),isNaN(f)&&(f=0),0===g?i=f%24:h=f%60}q.splice(e,1)}}if(!n){for(e=0;e<p.length;e++){var t=p[e];if(!(t.length<=0)){for(t=t.substring(0,Math.min(t.length,3)),f=0;f<c.text.months.length;f++){var u=c.text.months[f];if(u=u.substring(0,Math.min(t.length,Math.min(u.length,3))).toLowerCase(),u===t){k=f+1;break}}if(k>=0)break}}for(e=0;e<q.length;e++)if(f=parseInt(q[e]),!isNaN(f)&&f>59){l=f,q.splice(e,1);break}if(k<0)for(e=0;e<q.length;e++)if(g=e>1||c.monthFirst?e:1===e?0:1,f=parseInt(q[g]),!isNaN(f)&&1<=f&&f<=12){k=f,q.splice(g,1);break}for(e=0;e<q.length;e++)if(f=parseInt(q[e]),!isNaN(f)&&1<=f&&f<=31){j=f,q.splice(e,1);break}if(l<0)for(e=q.length-1;e>=0;e--)if(f=parseInt(q[e]),!isNaN(f)){f<99&&(f+=2e3),l=f,q.splice(e,1);break}}if(!o){if(i<0)for(e=0;e<q.length;e++)if(f=parseInt(q[e]),!isNaN(f)&&0<=f&&f<=23){i=f,q.splice(e,1);break}if(h<0)for(e=0;e<q.length;e++)if(f=parseInt(q[e]),!isNaN(f)&&0<=f&&f<=59){h=f,q.splice(e,1);break}}if(h<0&&i<0&&j<0&&k<0&&l<0)return null;h<0&&(h=0),i<0&&(i=0),j<0&&(j=1),k<0&&(k=1),l<0&&(l=(new Date).getFullYear()),m!==d&&(m?12===i&&(i=0):i<12&&(i+=12));var v=new Date(l,k-1,j,i,h);return v.getMonth()===k-1&&v.getFullYear()===l||(v=new Date(l,k,0,i,h)),isNaN(v.getTime())?null:v}},onChange:function(a,b){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode"}}}(jQuery,window,document);